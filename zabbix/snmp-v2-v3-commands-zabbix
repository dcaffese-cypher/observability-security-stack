Using snmpwalk

snmpwalk is used to sequentially retrieve a subtree of SNMP management values from an agent. It is useful for retrieving large amounts of data or for discovering what data is available.

Example command:

sh

snmpwalk -v 2c -c COMMUNITY_NAME TARGET_IP

    -v 2c specifies the SNMP version, which in this case is version 2c.
    -c COMMUNITY_NAME indicates the SNMP community, which here uses COMMUNITY_NAME as an example. The community acts as a simple password and must match the configuration on the target device.
    TARGET_IP is the IP address of the device you are querying.

This command will retrieve all objects under the iso.org.dod.internet.mgmt.mib-2 tree, which is the implicit OID (Object Identifier) when none is specified.
Using snmpget

snmpget is used to retrieve a specific value from an SNMP agent. You must know the specific OID of the value you want to retrieve.

Example command:

sh

snmpget -v 2c -c COMMUNITY_NAME TARGET_IP 1.3.6.1.2.1.1.1.0

    -v 2c and -c COMMUNITY_NAME have the same meaning as in the snmpwalk command.
    TARGET_IP is the IP address of the device you are querying.
    1.3.6.1.2.1.1.1.0 is the OID for sysDescr.0, which generally returns a description of the device. This is just an example OID; you will need the specific OID for the value you are trying to retrieve.

When using SNMP version 3 (SNMPv3), authentication and privacy (if applicable) require more details than just the community, as you would need for SNMP versions 1 and 2c. The error No securityName specified indicates that you are missing providing the security name, which is essential for authentication in SNMPv3.

The general format for snmpwalk using SNMPv3 without encryption (authentication only) is as follows:

bash

snmpwalk -v 3 -u [UserName] -l [SecurityLevel] -a [AuthProtocol] -A [AuthPassphrase] [TargetIP] [OID]

And if you need encryption (privacy), you would add:

bash

-x [PrivProtocol] -X [PrivPassphrase]

Here is an explanation of the parameters:

    -v 3: Specifies SNMP version 3.
    -u [UserName]: Is the username for SNMPv3 authentication.
    -l [SecurityLevel]: Security level; can be noAuthNoPriv, authNoPriv, or authPriv.
    -a [AuthProtocol]: Authentication protocol; usually MD5 or SHA.
    -A [AuthPassphrase]: The authentication password.
    [TargetIP]: The IP address of the device you are querying.
    [OID]: The object identifier you want to query. If not specified, snmpwalk will attempt to traverse the entire MIB tree.
    -x [PrivProtocol]: Privacy protocol (encryption); usually DES or AES.
    -X [PrivPassphrase]: The privacy password (encryption).

Example without encryption:

bash

sudo snmpwalk -v 3 -u SNMP_USERNAME -l authNoPriv -a MD5 -A AUTH_PASSWORD TARGET_IP

Example with encryption:

bash

sudo snmpwalk -v 3 -u SNMP_USERNAME -l authPriv -a MD5 -A AUTH_PASSWORD -x AES -X PRIV_PASSWORD TARGET_IP

Example with AES128 encryption:

bash

sudo snmpwalk -v 3 -u SNMP_USERNAME -l authPriv -a MD5 -A AUTH_PASSWORD -x AES128 -X PRIV_PASSWORD TARGET_IP

Note: Replace all placeholders:
- COMMUNITY_NAME: Your SNMP community string (for SNMPv2c)
- TARGET_IP: IP address of the device to query
- SNMP_USERNAME: Your SNMPv3 username
- AUTH_PASSWORD: Your SNMPv3 authentication password
- PRIV_PASSWORD: Your SNMPv3 privacy/encryption password
